{"remainingRequest":"/Users/apple/fish-wheels/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/fish-wheels/src/components/popover.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/fish-wheels/src/components/popover.vue","mtime":1592388609749},{"path":"/Users/apple/fish-wheels/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/fish-wheels/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/fish-wheels/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/fish-wheels/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiR3VsdVBvcG92ZXIiLAogIHByb3BzOiB7CiAgICBwb3NpdGlvbjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICd0b3AnLAogICAgICB2YWxpZGF0b3IgKHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIFsndG9wJywgJ2JvdHRvbScsICdsZWZ0JywgJ3JpZ2h0J10uaW5kZXhPZih2YWx1ZSkgPj0gMAogICAgICB9CiAgICB9LAogICAgdHJpZ2dlcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdjbGljaycsCiAgICAgIHZhbGlkYXRvciAodmFsdWUpIHsKICAgICAgICByZXR1cm4gWydjbGljaycsICdob3ZlciddLmluZGV4T2YodmFsdWUpID49IDAKICAgICAgfQogICAgfQogIH0sCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICB2aXNpYmxlOiBmYWxzZSwKICAgIH0KICB9LAogIG1vdW50ZWQgKCkgewogICAgdGhpcy5hZGRQb3BvdmVyTGlzdGVuZXJzKCkKICB9LAogIGJlZm9yZURlc3Ryb3kgKCkgewogICAgdGhpcy5wdXRCYWNrQ29udGVudCgpCiAgICB0aGlzLnJlbW92ZVBvcG92ZXJMaXN0ZW5lcnMoKQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIG9wZW5FdmVudCAoKSB7CiAgICAgIGlmICh0aGlzLnRyaWdnZXIgPT09ICdjbGljaycpIHsKICAgICAgICByZXR1cm4gJ2NsaWNrJwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAnbW91c2VlbnRlcicKICAgICAgfQogICAgfSwKICAgIGNsb3NlRXZlbnQgKCkgewogICAgICBpZiAodGhpcy50cmlnZ2VyID09PSAnY2xpY2snKSB7CiAgICAgICAgcmV0dXJuICdjbGljaycKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJ21vdXNlbGVhdmUnCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFkZFBvcG92ZXJMaXN0ZW5lcnMoKXsKICAgICAgaWYgKHRoaXMudHJpZ2dlciA9PT0gJ2NsaWNrJykgewogICAgICAgIHRoaXMuJHJlZnMucG9wb3Zlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DbGljaykKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyZWZzLnBvcG92ZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMub3BlbikKICAgICAgICB0aGlzLiRyZWZzLnBvcG92ZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuY2xvc2UpCiAgICAgIH0KICAgIH0sCiAgICByZW1vdmVQb3BvdmVyTGlzdGVuZXJzKCl7CiAgICAgIGlmICh0aGlzLnRyaWdnZXIgPT09ICdjbGljaycpIHsKICAgICAgICB0aGlzLiRyZWZzLnBvcG92ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2spCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcmVmcy5wb3BvdmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCB0aGlzLm9wZW4pCiAgICAgICAgdGhpcy4kcmVmcy5wb3BvdmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLmNsb3NlKQogICAgICB9CiAgICB9LAogICAgcHV0QmFja0NvbnRlbnQoKXsKICAgICAgY29uc3Qge2NvbnRlbnRXcmFwcGVyLCBwb3BvdmVyfSA9IHRoaXMuJHJlZnMKICAgICAgaWYoIWNvbnRlbnRXcmFwcGVyKXtyZXR1cm59CiAgICAgIHBvcG92ZXIuYXBwZW5kQ2hpbGQoY29udGVudFdyYXBwZXIpCiAgICB9LAogICAgcG9zaXRpb25Db250ZW50ICgpIHsKICAgICAgY29uc3Qge2NvbnRlbnRXcmFwcGVyLCB0cmlnZ2VyV3JhcHBlcn0gPSB0aGlzLiRyZWZzCiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGVudFdyYXBwZXIpCiAgICAgIGNvbnN0IHt3aWR0aCwgaGVpZ2h0LCB0b3AsIGxlZnR9ID0gdHJpZ2dlcldyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkKICAgICAgY29uc3Qge2hlaWdodDogaGVpZ2h0Mn0gPSBjb250ZW50V3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKQogICAgICBsZXQgcG9zaXRpb25zID0gewogICAgICAgIHRvcDoge3RvcDogdG9wICsgd2luZG93LnNjcm9sbFksIGxlZnQ6IGxlZnQgKyB3aW5kb3cuc2Nyb2xsWCx9LAogICAgICAgIGJvdHRvbToge3RvcDogdG9wICsgaGVpZ2h0ICsgd2luZG93LnNjcm9sbFksIGxlZnQ6IGxlZnQgKyB3aW5kb3cuc2Nyb2xsWH0sCiAgICAgICAgbGVmdDogewogICAgICAgICAgdG9wOiB0b3AgKyB3aW5kb3cuc2Nyb2xsWSArIChoZWlnaHQgLSBoZWlnaHQyKSAvIDIsCiAgICAgICAgICBsZWZ0OiBsZWZ0ICsgd2luZG93LnNjcm9sbFgKICAgICAgICB9LAogICAgICAgIHJpZ2h0OiB7CiAgICAgICAgICB0b3A6IHRvcCArIHdpbmRvdy5zY3JvbGxZICsgKGhlaWdodCAtIGhlaWdodDIpIC8gMiwKICAgICAgICAgIGxlZnQ6IGxlZnQgKyB3aW5kb3cuc2Nyb2xsWCArIHdpZHRoCiAgICAgICAgfSwKICAgICAgfQogICAgICBjb250ZW50V3JhcHBlci5zdHlsZS5sZWZ0ID0gcG9zaXRpb25zW3RoaXMucG9zaXRpb25dLmxlZnQgKyAncHgnCiAgICAgIGNvbnRlbnRXcmFwcGVyLnN0eWxlLnRvcCA9IHBvc2l0aW9uc1t0aGlzLnBvc2l0aW9uXS50b3AgKyAncHgnCgogICAgfSwKICAgIG9uQ2xpY2tEb2N1bWVudCAoZSkgewogICAgICBpZiAodGhpcy4kcmVmcy5wb3BvdmVyICYmCiAgICAgICAgKHRoaXMuJHJlZnMucG9wb3ZlciA9PT0gZS50YXJnZXQgfHwgdGhpcy4kcmVmcy5wb3BvdmVyLmNvbnRhaW5zKGUudGFyZ2V0KSkKICAgICAgKSB7IHJldHVybiB9CiAgICAgIGlmICh0aGlzLiRyZWZzLmNvbnRlbnRXcmFwcGVyICYmCiAgICAgICAgKHRoaXMuJHJlZnMuY29udGVudFdyYXBwZXIgPT09IGUudGFyZ2V0IHx8IHRoaXMuJHJlZnMuY29udGVudFdyYXBwZXIuY29udGFpbnMoZS50YXJnZXQpKQogICAgICApIHsgcmV0dXJuIH0KICAgICAgdGhpcy5jbG9zZSgpCiAgICB9LAogICAgb3BlbiAoKSB7CiAgICAgIHRoaXMudmlzaWJsZSA9IHRydWUKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMucG9zaXRpb25Db250ZW50KCkKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DbGlja0RvY3VtZW50KQogICAgICB9KQogICAgfSwKICAgIGNsb3NlICgpIHsKICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2UKICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2tEb2N1bWVudCkKICAgIH0sCiAgICBvbkNsaWNrIChldmVudCkgewogICAgICBpZiAodGhpcy4kcmVmcy50cmlnZ2VyV3JhcHBlci5jb250YWlucyhldmVudC50YXJnZXQpKSB7CiAgICAgICAgaWYgKHRoaXMudmlzaWJsZSA9PT0gdHJ1ZSkgewogICAgICAgICAgdGhpcy5jbG9zZSgpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMub3BlbigpCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["popover.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"popover.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"popover\" ref=\"popover\">\n    <div ref=\"contentWrapper\" class=\"content-wrapper\" v-if=\"visible\"\n      :class=\"{[`position-${position}`]:true}\">\n      <slot name=\"content\" :close=\"close\"></slot>\n    </div>\n    <span ref=\"triggerWrapper\" style=\"display: inline-block;\">\n      <slot></slot>\n    </span>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: \"GuluPopover\",\n    props: {\n      position: {\n        type: String,\n        default: 'top',\n        validator (value) {\n          return ['top', 'bottom', 'left', 'right'].indexOf(value) >= 0\n        }\n      },\n      trigger: {\n        type: String,\n        default: 'click',\n        validator (value) {\n          return ['click', 'hover'].indexOf(value) >= 0\n        }\n      }\n    },\n    data () {\n      return {\n        visible: false,\n      }\n    },\n    mounted () {\n      this.addPopoverListeners()\n    },\n    beforeDestroy () {\n      this.putBackContent()\n      this.removePopoverListeners()\n    },\n    computed: {\n      openEvent () {\n        if (this.trigger === 'click') {\n          return 'click'\n        } else {\n          return 'mouseenter'\n        }\n      },\n      closeEvent () {\n        if (this.trigger === 'click') {\n          return 'click'\n        } else {\n          return 'mouseleave'\n        }\n      }\n    },\n    methods: {\n      addPopoverListeners(){\n        if (this.trigger === 'click') {\n          this.$refs.popover.addEventListener('click', this.onClick)\n        } else {\n          this.$refs.popover.addEventListener('mouseenter', this.open)\n          this.$refs.popover.addEventListener('mouseleave', this.close)\n        }\n      },\n      removePopoverListeners(){\n        if (this.trigger === 'click') {\n          this.$refs.popover.removeEventListener('click', this.onClick)\n        } else {\n          this.$refs.popover.removeEventListener('mouseenter', this.open)\n          this.$refs.popover.removeEventListener('mouseleave', this.close)\n        }\n      },\n      putBackContent(){\n        const {contentWrapper, popover} = this.$refs\n        if(!contentWrapper){return}\n        popover.appendChild(contentWrapper)\n      },\n      positionContent () {\n        const {contentWrapper, triggerWrapper} = this.$refs\n        document.body.appendChild(contentWrapper)\n        const {width, height, top, left} = triggerWrapper.getBoundingClientRect()\n        const {height: height2} = contentWrapper.getBoundingClientRect()\n        let positions = {\n          top: {top: top + window.scrollY, left: left + window.scrollX,},\n          bottom: {top: top + height + window.scrollY, left: left + window.scrollX},\n          left: {\n            top: top + window.scrollY + (height - height2) / 2,\n            left: left + window.scrollX\n          },\n          right: {\n            top: top + window.scrollY + (height - height2) / 2,\n            left: left + window.scrollX + width\n          },\n        }\n        contentWrapper.style.left = positions[this.position].left + 'px'\n        contentWrapper.style.top = positions[this.position].top + 'px'\n\n      },\n      onClickDocument (e) {\n        if (this.$refs.popover &&\n          (this.$refs.popover === e.target || this.$refs.popover.contains(e.target))\n        ) { return }\n        if (this.$refs.contentWrapper &&\n          (this.$refs.contentWrapper === e.target || this.$refs.contentWrapper.contains(e.target))\n        ) { return }\n        this.close()\n      },\n      open () {\n        this.visible = true\n        this.$nextTick(() => {\n          this.positionContent()\n          document.addEventListener('click', this.onClickDocument)\n        })\n      },\n      close () {\n        this.visible = false\n        document.removeEventListener('click', this.onClickDocument)\n      },\n      onClick (event) {\n        if (this.$refs.triggerWrapper.contains(event.target)) {\n          if (this.visible === true) {\n            this.close()\n          } else {\n            this.open()\n          }\n        }\n      }\n    }\n  }\n</script>\n\n<style scoped lang=\"scss\">\n  $border-color: #333;\n  $border-radius: 4px;\n  .popover {\n    display: inline-block;\n    vertical-align: top;\n    position: relative;\n  }\n  .content-wrapper {\n    position: absolute;\n    border: 1px solid $border-color;\n    border-radius: $border-radius;\n    filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.5));\n    background: white;\n    padding: .5em 1em;\n    max-width: 20em;\n    word-break: break-all;\n    &::before, &::after {\n      content: '';\n      display: block;\n      border: 10px solid transparent;\n      width: 0;\n      height: 0;\n      position: absolute;\n    }\n    &.position-top {\n      transform: translateY(-100%);\n      margin-top: -10px;\n      &::before, &::after {\n        left: 10px;\n      }\n      &::before {\n        border-top-color: black;\n        border-bottom: none;\n        top: 100%;\n      }\n      &::after {\n        border-top-color: white;\n        border-bottom: none;\n        top: calc(100% - 1px);\n      }\n    }\n    &.position-bottom {\n      margin-top: 10px;\n      &::before, &::after {\n        left: 10px;\n      }\n      &::before {\n        border-top: none;\n        border-bottom-color: black;\n        bottom: 100%;\n      }\n      &::after {\n        border-top: none;\n        border-bottom-color: white;\n        bottom: calc(100% - 1px);\n      }\n    }\n    &.position-left {\n      transform: translateX(-100%);\n      margin-left: -10px;\n      &::before, &::after {\n        transform: translateY(-50%);\n        top: 50%;\n      }\n      &::before {\n        border-left-color: black;\n        border-right: none;\n        left: 100%;\n      }\n      &::after {\n        border-left-color: white;\n        border-right: none;\n        left: calc(100% - 1px);\n      }\n    }\n    &.position-right {\n      margin-left: 10px;\n      &::before, &::after {\n        transform: translateY(-50%);\n        top: 50%;\n      }\n      &::before {\n        border-right-color: black;\n        border-left: none;\n        right: 100%;\n      }\n      &::after {\n        border-right-color: white;\n        border-left: none;\n        right: calc(100% - 1px);\n      }\n    }\n  }\n</style>\n"]}]}