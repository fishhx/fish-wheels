{"remainingRequest":"/Users/apple/fish-wheels/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/fish-wheels/src/components/slides/slides.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/fish-wheels/src/components/slides/slides.vue","mtime":1592710474163},{"path":"/Users/apple/fish-wheels/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/fish-wheels/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/fish-wheels/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/fish-wheels/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBHSWNvbiBmcm9tICIuLi9pY29uIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsgR0ljb24gfSwKICBwcm9wczogewogICAgc2VsZWN0ZWQ6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9LAogICAgYXV0b1BsYXk6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIGF1dG9QbGF5RGVsYXk6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAzMDAwCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2hpbGRyZW5MZW5ndGg6IDAsCiAgICAgIGxhc3RTZWxlY3RlZEluZGV4OiB1bmRlZmluZWQsCiAgICAgIHRpbWVySWQ6IHVuZGVmaW5lZCwKICAgICAgc3RhcnRUb3VjaDogdW5kZWZpbmVkCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMudXBkYXRlQ2hpbGRyZW4oKTsKICAgIGlmICh0aGlzLmF1dG9QbGF5KSB7CiAgICAgIHRoaXMucGxheUF1dG9tYXRpY2FsbHkoKTsKICAgIH0KICAgIHRoaXMuY2hpbGRyZW5MZW5ndGggPSB0aGlzLml0ZW1zLmxlbmd0aDsKICB9LAogIHVwZGF0ZWQoKSB7CiAgICB0aGlzLnVwZGF0ZUNoaWxkcmVuKCk7CiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy5wYXVzZSgpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHNlbGVjdGVkSW5kZXgoKSB7CiAgICAgIGxldCBpbmRleCA9IHRoaXMubmFtZXMuaW5kZXhPZih0aGlzLnNlbGVjdGVkKTsKICAgICAgcmV0dXJuIGluZGV4ID09PSAtMSA/IDAgOiBpbmRleDsKICAgIH0sCiAgICBuYW1lcygpIHsKICAgICAgcmV0dXJuIHRoaXMuaXRlbXMubWFwKHZtID0+IHZtLm5hbWUpOwogICAgfSwKICAgIGl0ZW1zKCkgewogICAgICByZXR1cm4gdGhpcy4kY2hpbGRyZW4uZmlsdGVyKHZtID0+IHZtLiRvcHRpb25zLm5hbWUgPT09ICJHdWx1U2xpZGVzSXRlbSIpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgb25Nb3VzZUVudGVyKCkgewogICAgICB0aGlzLnBhdXNlKCk7CiAgICB9LAogICAgb25Nb3VzZUxlYXZlKCkgewogICAgICB0aGlzLnBsYXlBdXRvbWF0aWNhbGx5KCk7CiAgICB9LAogICAgb25Ub3VjaFN0YXJ0KGUpIHsKICAgICAgdGhpcy5wYXVzZSgpOwogICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA+IDEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5zdGFydFRvdWNoID0gZS50b3VjaGVzWzBdOwogICAgfSwKICAgIG9uVG91Y2hFbmQoZSkgewogICAgICBsZXQgZW5kVG91Y2ggPSBlLmNoYW5nZWRUb3VjaGVzWzBdOwogICAgICBsZXQgeyBjbGllbnRYOiB4MSwgY2xpZW50WTogeTEgfSA9IHRoaXMuc3RhcnRUb3VjaDsKICAgICAgbGV0IHsgY2xpZW50WDogeDIsIGNsaWVudFk6IHkyIH0gPSBlbmRUb3VjaDsKCiAgICAgIGxldCBkaXN0YW5jZSA9IE1hdGguc3FydChNYXRoLnBvdyh4MiAtIHgxLCAyKSArIE1hdGgucG93KHkyIC0geTEsIDIpKTsKICAgICAgbGV0IGRlbHRhWSA9IE1hdGguYWJzKHkyIC0geTEpOwogICAgICBsZXQgcmF0ZSA9IGRpc3RhbmNlIC8gZGVsdGFZOwogICAgICBpZiAocmF0ZSA+IDIpIHsKICAgICAgICBpZiAoeDIgPiB4MSkgewogICAgICAgICAgdGhpcy5zZWxlY3QodGhpcy5zZWxlY3RlZEluZGV4IC0gMSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc2VsZWN0KHRoaXMuc2VsZWN0ZWRJbmRleCArIDEpOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5wbGF5QXV0b21hdGljYWxseSgpOwogICAgICB9KTsKICAgIH0sCiAgICBvbkNsaWNrUHJldigpIHsKICAgICAgdGhpcy5zZWxlY3QodGhpcy5zZWxlY3RlZEluZGV4IC0gMSk7CiAgICB9LAogICAgb25DbGlja05leHQoKSB7CiAgICAgIHRoaXMuc2VsZWN0KHRoaXMuc2VsZWN0ZWRJbmRleCArIDEpOwogICAgfSwKICAgIHBsYXlBdXRvbWF0aWNhbGx5KCkgewogICAgICBpZiAodGhpcy50aW1lcklkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGxldCBydW4gPSAoKSA9PiB7CiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5uYW1lcy5pbmRleE9mKHRoaXMuZ2V0U2VsZWN0ZWQoKSk7CiAgICAgICAgbGV0IG5ld0luZGV4ID0gaW5kZXggKyAxOwogICAgICAgIHRoaXMuc2VsZWN0KG5ld0luZGV4KTsgLy8g5ZGK6K+J5aSW55WM6YCJ5LitIG5ld0luZGV4CiAgICAgICAgdGhpcy50aW1lcklkID0gc2V0VGltZW91dChydW4sIHRoaXMuYXV0b1BsYXlEZWxheSk7CiAgICAgIH07CiAgICAgIHRoaXMudGltZXJJZCA9IHNldFRpbWVvdXQocnVuLCB0aGlzLmF1dG9QbGF5RGVsYXkpOwogICAgfSwKICAgIHBhdXNlKCkgewogICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJJZCk7CiAgICAgIHRoaXMudGltZXJJZCA9IHVuZGVmaW5lZDsKICAgIH0sCiAgICBzZWxlY3QobmV3SW5kZXgpIHsKICAgICAgdGhpcy5sYXN0U2VsZWN0ZWRJbmRleCA9IHRoaXMuc2VsZWN0ZWRJbmRleDsKICAgICAgaWYgKG5ld0luZGV4ID09PSAtMSkgewogICAgICAgIG5ld0luZGV4ID0gdGhpcy5uYW1lcy5sZW5ndGggLSAxOwogICAgICB9CiAgICAgIGlmIChuZXdJbmRleCA9PT0gdGhpcy5uYW1lcy5sZW5ndGgpIHsKICAgICAgICBuZXdJbmRleCA9IDA7CiAgICAgIH0KICAgICAgdGhpcy4kZW1pdCgidXBkYXRlOnNlbGVjdGVkIiwgdGhpcy5uYW1lc1tuZXdJbmRleF0pOwogICAgfSwKICAgIGdldFNlbGVjdGVkKCkgewogICAgICBsZXQgZmlyc3QgPSB0aGlzLml0ZW1zWzBdOwogICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZCB8fCBmaXJzdC5uYW1lOwogICAgfSwKICAgIHVwZGF0ZUNoaWxkcmVuKCkgewogICAgICBsZXQgc2VsZWN0ZWQgPSB0aGlzLmdldFNlbGVjdGVkKCk7CiAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaCh2bSA9PiB7CiAgICAgICAgbGV0IHJldmVyc2UgPQogICAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID4gdGhpcy5sYXN0U2VsZWN0ZWRJbmRleCA/IGZhbHNlIDogdHJ1ZTsKICAgICAgICBpZiAodGhpcy50aW1lcklkKSB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIHRoaXMubGFzdFNlbGVjdGVkSW5kZXggPT09IHRoaXMuaXRlbXMubGVuZ3RoIC0gMSAmJgogICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPT09IDAKICAgICAgICAgICkgewogICAgICAgICAgICByZXZlcnNlID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIHRoaXMubGFzdFNlbGVjdGVkSW5kZXggPT09IDAgJiYKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID09PSB0aGlzLml0ZW1zLmxlbmd0aCAtIDEKICAgICAgICAgICkgewogICAgICAgICAgICByZXZlcnNlID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdm0ucmV2ZXJzZSA9IHJldmVyc2U7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgdm0uc2VsZWN0ZWQgPSBzZWxlY3RlZDsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["slides.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"slides.vue","sourceRoot":"src/components/slides","sourcesContent":["<template>\n  <div\n    class=\"g-slides\"\n    @mouseenter=\"onMouseEnter\"\n    @mouseleave=\"onMouseLeave\"\n    @touchstart=\"onTouchStart\"\n    @touchend=\"onTouchEnd\"\n  >\n    <div class=\"g-slides-window\" ref=\"window\">\n      <div class=\"g-slides-wrapper\">\n        <slot></slot>\n      </div>\n    </div>\n    <div class=\"g-slides-dots\">\n      <span @click=\"onClickPrev\" data-action=\"prev\">\n        <g-icon name=\"left\"></g-icon>\n      </span>\n      <span\n        v-for=\"n in childrenLength\"\n        :class=\"{active: selectedIndex === n-1}\"\n        :key=\"n\"\n        :data-index=\"n-1\"\n        @click=\"select(n-1)\"\n      >{{n}}</span>\n      <span @click=\"onClickNext\" data-action=\"next\">\n        <g-icon name=\"right\"></g-icon>\n      </span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport GIcon from \"../icon\";\nexport default {\n  components: { GIcon },\n  props: {\n    selected: {\n      type: String\n    },\n    autoPlay: {\n      type: Boolean,\n      default: true\n    },\n    autoPlayDelay: {\n      type: Number,\n      default: 3000\n    }\n  },\n  data() {\n    return {\n      childrenLength: 0,\n      lastSelectedIndex: undefined,\n      timerId: undefined,\n      startTouch: undefined\n    };\n  },\n  mounted() {\n    this.updateChildren();\n    if (this.autoPlay) {\n      this.playAutomatically();\n    }\n    this.childrenLength = this.items.length;\n  },\n  updated() {\n    this.updateChildren();\n  },\n  beforeDestroy() {\n    this.pause();\n  },\n  computed: {\n    selectedIndex() {\n      let index = this.names.indexOf(this.selected);\n      return index === -1 ? 0 : index;\n    },\n    names() {\n      return this.items.map(vm => vm.name);\n    },\n    items() {\n      return this.$children.filter(vm => vm.$options.name === \"GuluSlidesItem\");\n    }\n  },\n  methods: {\n    onMouseEnter() {\n      this.pause();\n    },\n    onMouseLeave() {\n      this.playAutomatically();\n    },\n    onTouchStart(e) {\n      this.pause();\n      if (e.touches.length > 1) {\n        return;\n      }\n      this.startTouch = e.touches[0];\n    },\n    onTouchEnd(e) {\n      let endTouch = e.changedTouches[0];\n      let { clientX: x1, clientY: y1 } = this.startTouch;\n      let { clientX: x2, clientY: y2 } = endTouch;\n\n      let distance = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n      let deltaY = Math.abs(y2 - y1);\n      let rate = distance / deltaY;\n      if (rate > 2) {\n        if (x2 > x1) {\n          this.select(this.selectedIndex - 1);\n        } else {\n          this.select(this.selectedIndex + 1);\n        }\n      }\n      this.$nextTick(() => {\n        this.playAutomatically();\n      });\n    },\n    onClickPrev() {\n      this.select(this.selectedIndex - 1);\n    },\n    onClickNext() {\n      this.select(this.selectedIndex + 1);\n    },\n    playAutomatically() {\n      if (this.timerId) {\n        return;\n      }\n      let run = () => {\n        let index = this.names.indexOf(this.getSelected());\n        let newIndex = index + 1;\n        this.select(newIndex); // 告诉外界选中 newIndex\n        this.timerId = setTimeout(run, this.autoPlayDelay);\n      };\n      this.timerId = setTimeout(run, this.autoPlayDelay);\n    },\n    pause() {\n      window.clearTimeout(this.timerId);\n      this.timerId = undefined;\n    },\n    select(newIndex) {\n      this.lastSelectedIndex = this.selectedIndex;\n      if (newIndex === -1) {\n        newIndex = this.names.length - 1;\n      }\n      if (newIndex === this.names.length) {\n        newIndex = 0;\n      }\n      this.$emit(\"update:selected\", this.names[newIndex]);\n    },\n    getSelected() {\n      let first = this.items[0];\n      return this.selected || first.name;\n    },\n    updateChildren() {\n      let selected = this.getSelected();\n      this.items.forEach(vm => {\n        let reverse =\n          this.selectedIndex > this.lastSelectedIndex ? false : true;\n        if (this.timerId) {\n          if (\n            this.lastSelectedIndex === this.items.length - 1 &&\n            this.selectedIndex === 0\n          ) {\n            reverse = false;\n          }\n          if (\n            this.lastSelectedIndex === 0 &&\n            this.selectedIndex === this.items.length - 1\n          ) {\n            reverse = true;\n          }\n        }\n        vm.reverse = reverse;\n        this.$nextTick(() => {\n          vm.selected = selected;\n        });\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n$border-color-hover: #666;\n$border-color: #999;\n$border-color-light: lighten($border-color, 30%);\n$border-radius: 4px;\n$box-shadow-color: rgba(0, 0, 0, 0.5);\n$button-active-bg: #eee;\n$button-bg: white;\n$button-height: 32px;\n$color: #333;\n$light-color: #666;\n$font-size: 14px;\n$small-font-size: 12px;\n$input-height: 32px;\n$red: #f1453d;\n$grey: #eee;\n$blue: #4a90e2;\n.box-shadow {\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.15);\n}\n.g-slides {\n  &-window {\n    overflow: hidden;\n  }\n  &-wrapper {\n    position: relative;\n  }\n  &-dots {\n    padding: 8px 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    > span {\n      width: 20px;\n      height: 20px;\n      display: inline-flex;\n      justify-content: center;\n      align-items: center;\n      background: #ddd;\n      border-radius: 50%;\n      margin: 0 8px;\n      font-size: 12px;\n      &:hover {\n        cursor: pointer;\n      }\n      &.active {\n        background: #aaa;\n        color: white;\n        &:hover {\n          cursor: default;\n        }\n      }\n    }\n  }\n}\n</style>\n"]}]}