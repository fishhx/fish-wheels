{"remainingRequest":"/Users/apple/fish-wheels/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/fish-wheels/src/components/slides/slides.vue?vue&type=style&index=0&id=5778534f&lang=scss&scoped=true&","dependencies":[{"path":"/Users/apple/fish-wheels/src/components/slides/slides.vue","mtime":1592710474163},{"path":"/Users/apple/fish-wheels/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/fish-wheels/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/apple/fish-wheels/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/apple/fish-wheels/node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/fish-wheels/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/fish-wheels/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKJGJvcmRlci1jb2xvci1ob3ZlcjogIzY2NjsKJGJvcmRlci1jb2xvcjogIzk5OTsKJGJvcmRlci1jb2xvci1saWdodDogbGlnaHRlbigkYm9yZGVyLWNvbG9yLCAzMCUpOwokYm9yZGVyLXJhZGl1czogNHB4OwokYm94LXNoYWRvdy1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjUpOwokYnV0dG9uLWFjdGl2ZS1iZzogI2VlZTsKJGJ1dHRvbi1iZzogd2hpdGU7CiRidXR0b24taGVpZ2h0OiAzMnB4OwokY29sb3I6ICMzMzM7CiRsaWdodC1jb2xvcjogIzY2NjsKJGZvbnQtc2l6ZTogMTRweDsKJHNtYWxsLWZvbnQtc2l6ZTogMTJweDsKJGlucHV0LWhlaWdodDogMzJweDsKJHJlZDogI2YxNDUzZDsKJGdyZXk6ICNlZWU7CiRibHVlOiAjNGE5MGUyOwouYm94LXNoYWRvdyB7CiAgYm94LXNoYWRvdzogMCAwIDVweCByZ2JhKDAsIDAsIDAsIDAuMTUpOwp9Ci5nLXNsaWRlcyB7CiAgJi13aW5kb3cgewogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICB9CiAgJi13cmFwcGVyIHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICB9CiAgJi1kb3RzIHsKICAgIHBhZGRpbmc6IDhweCAwOwogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgID4gc3BhbiB7CiAgICAgIHdpZHRoOiAyMHB4OwogICAgICBoZWlnaHQ6IDIwcHg7CiAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4OwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgYmFja2dyb3VuZDogI2RkZDsKICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICBtYXJnaW46IDAgOHB4OwogICAgICBmb250LXNpemU6IDEycHg7CiAgICAgICY6aG92ZXIgewogICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgfQogICAgICAmLmFjdGl2ZSB7CiAgICAgICAgYmFja2dyb3VuZDogI2FhYTsKICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgJjpob3ZlciB7CiAgICAgICAgICBjdXJzb3I6IGRlZmF1bHQ7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["slides.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"slides.vue","sourceRoot":"src/components/slides","sourcesContent":["<template>\n  <div\n    class=\"g-slides\"\n    @mouseenter=\"onMouseEnter\"\n    @mouseleave=\"onMouseLeave\"\n    @touchstart=\"onTouchStart\"\n    @touchend=\"onTouchEnd\"\n  >\n    <div class=\"g-slides-window\" ref=\"window\">\n      <div class=\"g-slides-wrapper\">\n        <slot></slot>\n      </div>\n    </div>\n    <div class=\"g-slides-dots\">\n      <span @click=\"onClickPrev\" data-action=\"prev\">\n        <g-icon name=\"left\"></g-icon>\n      </span>\n      <span\n        v-for=\"n in childrenLength\"\n        :class=\"{active: selectedIndex === n-1}\"\n        :key=\"n\"\n        :data-index=\"n-1\"\n        @click=\"select(n-1)\"\n      >{{n}}</span>\n      <span @click=\"onClickNext\" data-action=\"next\">\n        <g-icon name=\"right\"></g-icon>\n      </span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport GIcon from \"../icon\";\nexport default {\n  components: { GIcon },\n  props: {\n    selected: {\n      type: String\n    },\n    autoPlay: {\n      type: Boolean,\n      default: true\n    },\n    autoPlayDelay: {\n      type: Number,\n      default: 3000\n    }\n  },\n  data() {\n    return {\n      childrenLength: 0,\n      lastSelectedIndex: undefined,\n      timerId: undefined,\n      startTouch: undefined\n    };\n  },\n  mounted() {\n    this.updateChildren();\n    if (this.autoPlay) {\n      this.playAutomatically();\n    }\n    this.childrenLength = this.items.length;\n  },\n  updated() {\n    this.updateChildren();\n  },\n  beforeDestroy() {\n    this.pause();\n  },\n  computed: {\n    selectedIndex() {\n      let index = this.names.indexOf(this.selected);\n      return index === -1 ? 0 : index;\n    },\n    names() {\n      return this.items.map(vm => vm.name);\n    },\n    items() {\n      return this.$children.filter(vm => vm.$options.name === \"GuluSlidesItem\");\n    }\n  },\n  methods: {\n    onMouseEnter() {\n      this.pause();\n    },\n    onMouseLeave() {\n      this.playAutomatically();\n    },\n    onTouchStart(e) {\n      this.pause();\n      if (e.touches.length > 1) {\n        return;\n      }\n      this.startTouch = e.touches[0];\n    },\n    onTouchEnd(e) {\n      let endTouch = e.changedTouches[0];\n      let { clientX: x1, clientY: y1 } = this.startTouch;\n      let { clientX: x2, clientY: y2 } = endTouch;\n\n      let distance = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n      let deltaY = Math.abs(y2 - y1);\n      let rate = distance / deltaY;\n      if (rate > 2) {\n        if (x2 > x1) {\n          this.select(this.selectedIndex - 1);\n        } else {\n          this.select(this.selectedIndex + 1);\n        }\n      }\n      this.$nextTick(() => {\n        this.playAutomatically();\n      });\n    },\n    onClickPrev() {\n      this.select(this.selectedIndex - 1);\n    },\n    onClickNext() {\n      this.select(this.selectedIndex + 1);\n    },\n    playAutomatically() {\n      if (this.timerId) {\n        return;\n      }\n      let run = () => {\n        let index = this.names.indexOf(this.getSelected());\n        let newIndex = index + 1;\n        this.select(newIndex); // 告诉外界选中 newIndex\n        this.timerId = setTimeout(run, this.autoPlayDelay);\n      };\n      this.timerId = setTimeout(run, this.autoPlayDelay);\n    },\n    pause() {\n      window.clearTimeout(this.timerId);\n      this.timerId = undefined;\n    },\n    select(newIndex) {\n      this.lastSelectedIndex = this.selectedIndex;\n      if (newIndex === -1) {\n        newIndex = this.names.length - 1;\n      }\n      if (newIndex === this.names.length) {\n        newIndex = 0;\n      }\n      this.$emit(\"update:selected\", this.names[newIndex]);\n    },\n    getSelected() {\n      let first = this.items[0];\n      return this.selected || first.name;\n    },\n    updateChildren() {\n      let selected = this.getSelected();\n      this.items.forEach(vm => {\n        let reverse =\n          this.selectedIndex > this.lastSelectedIndex ? false : true;\n        if (this.timerId) {\n          if (\n            this.lastSelectedIndex === this.items.length - 1 &&\n            this.selectedIndex === 0\n          ) {\n            reverse = false;\n          }\n          if (\n            this.lastSelectedIndex === 0 &&\n            this.selectedIndex === this.items.length - 1\n          ) {\n            reverse = true;\n          }\n        }\n        vm.reverse = reverse;\n        this.$nextTick(() => {\n          vm.selected = selected;\n        });\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n$border-color-hover: #666;\n$border-color: #999;\n$border-color-light: lighten($border-color, 30%);\n$border-radius: 4px;\n$box-shadow-color: rgba(0, 0, 0, 0.5);\n$button-active-bg: #eee;\n$button-bg: white;\n$button-height: 32px;\n$color: #333;\n$light-color: #666;\n$font-size: 14px;\n$small-font-size: 12px;\n$input-height: 32px;\n$red: #f1453d;\n$grey: #eee;\n$blue: #4a90e2;\n.box-shadow {\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.15);\n}\n.g-slides {\n  &-window {\n    overflow: hidden;\n  }\n  &-wrapper {\n    position: relative;\n  }\n  &-dots {\n    padding: 8px 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    > span {\n      width: 20px;\n      height: 20px;\n      display: inline-flex;\n      justify-content: center;\n      align-items: center;\n      background: #ddd;\n      border-radius: 50%;\n      margin: 0 8px;\n      font-size: 12px;\n      &:hover {\n        cursor: pointer;\n      }\n      &.active {\n        background: #aaa;\n        color: white;\n        &:hover {\n          cursor: default;\n        }\n      }\n    }\n  }\n}\n</style>\n"]}]}