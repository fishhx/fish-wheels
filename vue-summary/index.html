<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VueSummary | FishWheels</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/fish-wheels/fish.png">
    <meta name="description" content="一个好用的UI框架">
    <link rel="preload" href="/fish-wheels/assets/css/0.styles.a1388bfb.css" as="style"><link rel="preload" href="/fish-wheels/assets/js/app.9a142dd2.js" as="script"><link rel="preload" href="/fish-wheels/assets/js/2.2ea81ea5.js" as="script"><link rel="preload" href="/fish-wheels/assets/js/31.b9f98c9c.js" as="script"><link rel="prefetch" href="/fish-wheels/assets/js/10.387cf6d0.js"><link rel="prefetch" href="/fish-wheels/assets/js/11.2b794fd9.js"><link rel="prefetch" href="/fish-wheels/assets/js/12.92c5bd01.js"><link rel="prefetch" href="/fish-wheels/assets/js/13.07eae319.js"><link rel="prefetch" href="/fish-wheels/assets/js/14.548229e0.js"><link rel="prefetch" href="/fish-wheels/assets/js/15.b3972e82.js"><link rel="prefetch" href="/fish-wheels/assets/js/16.6abe024a.js"><link rel="prefetch" href="/fish-wheels/assets/js/17.7647b667.js"><link rel="prefetch" href="/fish-wheels/assets/js/18.8beae564.js"><link rel="prefetch" href="/fish-wheels/assets/js/19.ffaf751e.js"><link rel="prefetch" href="/fish-wheels/assets/js/20.71e9755a.js"><link rel="prefetch" href="/fish-wheels/assets/js/21.2eeefa86.js"><link rel="prefetch" href="/fish-wheels/assets/js/22.ba13e6c6.js"><link rel="prefetch" href="/fish-wheels/assets/js/23.ef42b6cd.js"><link rel="prefetch" href="/fish-wheels/assets/js/24.e095945c.js"><link rel="prefetch" href="/fish-wheels/assets/js/25.c3360e8d.js"><link rel="prefetch" href="/fish-wheels/assets/js/26.b1ee3bc4.js"><link rel="prefetch" href="/fish-wheels/assets/js/27.80cdf865.js"><link rel="prefetch" href="/fish-wheels/assets/js/28.a04ca27b.js"><link rel="prefetch" href="/fish-wheels/assets/js/29.9872dfbe.js"><link rel="prefetch" href="/fish-wheels/assets/js/3.831c4e7b.js"><link rel="prefetch" href="/fish-wheels/assets/js/30.a190a64f.js"><link rel="prefetch" href="/fish-wheels/assets/js/32.7b09e0c4.js"><link rel="prefetch" href="/fish-wheels/assets/js/33.e74bffd9.js"><link rel="prefetch" href="/fish-wheels/assets/js/34.79386e81.js"><link rel="prefetch" href="/fish-wheels/assets/js/35.e4b40eba.js"><link rel="prefetch" href="/fish-wheels/assets/js/4.4f9327b8.js"><link rel="prefetch" href="/fish-wheels/assets/js/5.265644b2.js"><link rel="prefetch" href="/fish-wheels/assets/js/6.42b0cd5e.js"><link rel="prefetch" href="/fish-wheels/assets/js/7.82354ee2.js"><link rel="prefetch" href="/fish-wheels/assets/js/8.ca28e18e.js"><link rel="prefetch" href="/fish-wheels/assets/js/9.6488c8f7.js">
    <link rel="stylesheet" href="/fish-wheels/assets/css/0.styles.a1388bfb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fish-wheels/" class="home-link router-link-active"><img src="/fish-wheels/fish.png" alt="FishWheels" class="logo"> <span class="site-name can-hide">FishWheels</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/fish-wheels/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/fish-wheels/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>入门</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fish-wheels/introduce/" class="sidebar-link">介绍</a></li><li><a href="/fish-wheels/install/" class="sidebar-link">安装</a></li><li><a href="/fish-wheels/get-started/" class="sidebar-link">快速上手</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>组件</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fish-wheels/components/button.html" class="sidebar-link">Button</a></li><li><a href="/fish-wheels/components/icon.html" class="sidebar-link">Icon</a></li><li><a href="/fish-wheels/components/input.html" class="sidebar-link">Input</a></li><li><a href="/fish-wheels/components/grid.html" class="sidebar-link">Grid</a></li><li><a href="/fish-wheels/components/tabs.html" class="sidebar-link">Tabs</a></li><li><a href="/fish-wheels/components/pager.html" class="sidebar-link">Pager</a></li><li><a href="/fish-wheels/components/popover.html" class="sidebar-link">Popover</a></li><li><a href="/fish-wheels/components/slides.html" class="sidebar-link">Carousel</a></li><li><a href="/fish-wheels/components/collapse.html" class="sidebar-link">Collapse</a></li><li><a href="/fish-wheels/components/cascader.html" class="sidebar-link">Cascader</a></li><li><a href="/fish-wheels/components/calendar.html" class="sidebar-link">Calendar</a></li><li><a href="/fish-wheels/components/tree.html" class="sidebar-link">Tree</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>总结</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fish-wheels/%E7%BB%84%E4%BB%B6%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90/" class="sidebar-link">组件需求分析</a></li><li><a href="/fish-wheels/API%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/" class="sidebar-link">API设计原则</a></li><li><a href="/fish-wheels/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E6%80%BB%E7%BB%93/" class="sidebar-link">单元测试总结</a></li><li><a href="/fish-wheels/vue-cli/" class="sidebar-link">vue-cli</a></li><li><a href="/fish-wheels/vue-summary/" aria-current="page" class="active sidebar-link">VueSummary</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fish-wheels/vue-summary/#data" class="sidebar-link">data</a></li><li class="sidebar-sub-header"><a href="/fish-wheels/vue-summary/#props" class="sidebar-link">props</a></li><li class="sidebar-sub-header"><a href="/fish-wheels/vue-summary/#computed" class="sidebar-link">computed</a></li><li class="sidebar-sub-header"><a href="/fish-wheels/vue-summary/#watch" class="sidebar-link">watch</a></li><li class="sidebar-sub-header"><a href="/fish-wheels/vue-summary/#slots" class="sidebar-link">slots</a></li><li class="sidebar-sub-header"><a href="/fish-wheels/vue-summary/#修饰符" class="sidebar-link">修饰符</a></li><li class="sidebar-sub-header"><a href="/fish-wheels/vue-summary/#父子组件" class="sidebar-link">父子组件</a></li><li class="sidebar-sub-header"><a href="/fish-wheels/vue-summary/#事件" class="sidebar-link">事件</a></li><li class="sidebar-sub-header"><a href="/fish-wheels/vue-summary/#异步" class="sidebar-link">异步</a></li><li class="sidebar-sub-header"><a href="/fish-wheels/vue-summary/#依赖注入" class="sidebar-link">依赖注入</a></li><li class="sidebar-sub-header"><a href="/fish-wheels/vue-summary/#生命周期" class="sidebar-link">生命周期</a></li><li class="sidebar-sub-header"><a href="/fish-wheels/vue-summary/#v-for" class="sidebar-link">v-for</a></li><li class="sidebar-sub-header"><a href="/fish-wheels/vue-summary/#插件" class="sidebar-link">插件</a></li><li class="sidebar-sub-header"><a href="/fish-wheels/vue-summary/#指令" class="sidebar-link">指令</a></li></ul></li><li><a href="/fish-wheels/%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/" class="sidebar-link">开发流程</a></li><li><a href="/fish-wheels/%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/" class="sidebar-link">开发规范</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vuesummary"><a href="#vuesummary" class="header-anchor">#</a> VueSummary</h1> <h2 id="data"><a href="#data" class="header-anchor">#</a> data</h2> <blockquote><p>data 里面放组件自身能维护的数据.比如 popover 是否可见</p></blockquote> <h2 id="props"><a href="#props" class="header-anchor">#</a> props</h2> <ul><li>props 里面放由父组件传回的数据.比如 dataSource 等用户数据,以及组件属性（name,width,height...）</li> <li>props 里面的数据不许修改,要更新只能通过 $emit 触发,.sync等方式通知父组件处理</li> <li>一个组件的 props 必须正交</li> <li>props 不能以 data-　开头</li></ul> <h2 id="computed"><a href="#computed" class="header-anchor">#</a> computed</h2> <ul><li>如果某个值的产生需要用到 data/props,我们就把这个值放入 computed 中</li></ul> <div class="language- extra-class"><pre class="language-text"><code>// data1,prop2...变化后,将重新触发 fn,实现对 generatedValue 的更新
computed: {
    generatedValue: function () {
        return fn(data1,prop2...)
    }
}
</code></pre></div><ul><li>一般用于Class绑定或Style绑定</li></ul> <div class="language- extra-class"><pre class="language-text"><code>// Class绑定
computed: {
    toastClasses: function () {
        return [`position-${this.position}`]
    }
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>// Style绑定
computed: {
    colStyle() {
        return {
            paddingLeft: this.gutter / 2 + 'px',
            paddingRight: this.gutter / 2 + 'px'
        }
    }
}
</code></pre></div><h2 id="watch"><a href="#watch" class="header-anchor">#</a> watch</h2> <ul><li>watch 就是定向版的 update(),一旦某个 data/props 发生变化,就立即执行相应操作</li></ul> <div class="language- extra-class"><pre class="language-text"><code>// selectedItems可以是data,也可以是props（由父组件传回）
watch:{
    selectedItems(){
        if(selectedItems.length&lt;10){
            console.log(长度小于10)
        }
    }
}
</code></pre></div><p>等价于</p> <div class="language- extra-class"><pre class="language-text"><code>updated(){
    if(this.selectedItems.length&lt;10){
        console.log(长度小于10)
    }
}
</code></pre></div><ul><li>watch 与 computed 的区别</li></ul> <blockquote><p>computed 的作用是维护一个基于 data/props 的值,而 watch 是善后,是保证某个 data/prop 变化后相应操作能立即跟上.</p></blockquote> <h2 id="slots"><a href="#slots" class="header-anchor">#</a> slots</h2> <ul><li>$slots 要放在 $mount() 之前</li> <li>如何向组件的slot中插入HTML内容？
<ul><li>这是一种危险的行为（阻止事件冒泡也是一种危险的行为）</li> <li>实现方法</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;div v-html=&quot;$slots.default[0]&quot;&gt;&lt;/div&gt;

vm.$slots.default=['这是&lt;strong style=&quot;color: blue&quot;&gt;toast&lt;/strong&gt;信息']
</code></pre></div></li> <li>slot-scope
<ul><li>传递属性</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;template slot=&quot;content&quot; slot-scope=&quot;{close}&quot;&gt;
    &lt;g-button  v-on:click.native=&quot;close&quot;&gt;关闭&lt;/g-button&gt;
&lt;/template&gt;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>&lt;slot name=&quot;content&quot;　:close=&quot;closeContent&quot;&gt;&lt;/slot&gt;

methods: {
    closeContent(){
        ...
    }
}
</code></pre></div></li></ul> <ul><li>传递对象<div class="language- extra-class"><pre class="language-text"><code>&lt;td&gt;
    &lt;slot name=&quot;content&quot; :xxx=&quot;item&quot;&gt;&lt;/slot&gt;
&lt;/td&gt;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>&lt;template slot=&quot;content&quot; slot-scope=&quot;{xxx}&quot;&gt;
    {{xxx.name}}
&lt;/template&gt;
</code></pre></div></li> <li>slots 外部一般用一个标签包裹起来</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
    ...
    &lt;div class=&quot;wrapper&quot;&gt;
        &lt;slots&gt;&lt;slots&gt;
    &lt;/div&gt;
&lt;/template&gt;
</code></pre></div><h2 id="修饰符"><a href="#修饰符" class="header-anchor">#</a> 修饰符</h2> <h4 id="sync"><a href="#sync" class="header-anchor">#</a> <a href="https://cn.vuejs.org/v2/guide/components-custom-events.html#sync-%E4%BF%AE%E9%A5%B0%E7%AC%A6" target="_blank" rel="noopener noreferrer">.sync<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p>对于</p> <div class="language- extra-class"><pre class="language-text"><code>this.$emit('update:title', newTitle)
</code></pre></div><p>下面两种写法等价</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;text-document :doc.title = $event @update:title=&quot;doc.title = $event&quot;&gt;&lt;/text-document&gt;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>&lt;text-document :title.sync=&quot;doc.title&quot;&gt;&lt;/text-document&gt;
</code></pre></div><p>也就是说sync的作用是让 title=&quot;doc.title&quot; 异步执行多次（响应式）</p> <h4 id="native"><a href="#native" class="header-anchor">#</a> <a href="https://cn.vuejs.org/v2/guide/components-custom-events.html#%E5%B0%86%E5%8E%9F%E7%94%9F%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E5%88%B0%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">.native<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <blockquote><p>原生的事件是无法直接添加到组件上的,想要在组件上加原生的DOM事件,必须使用native修饰符</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>&lt;g-button  v-on:click.native=&quot;close&quot;&gt;close&lt;/g-button&gt;&lt;/div&gt;
</code></pre></div><p>除了原生的DOM事件,还可能通过$emit触发组件上的事件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;g-button @beEmited=&quot;xxx&quot;&gt;
</code></pre></div><p>beEmited事件是g-button内部的元素点击事件通过emit触发的</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
    &lt;button @click=&quot;$emit('beEmited')&quot;&gt;&lt;/button&gt;
&lt;/template&gt;
</code></pre></div><h2 id="父子组件"><a href="#父子组件" class="header-anchor">#</a> 父子组件</h2> <h4 id="父子组件-created-和-mounted-顺序"><a href="#父子组件-created-和-mounted-顺序" class="header-anchor">#</a> 父子组件 created 和 mounted 顺序</h4> <div class="language- extra-class"><pre class="language-text"><code>father.created
children.created
children.mounted
father.mounted
</code></pre></div><h4 id="父子组件通信"><a href="#父子组件通信" class="header-anchor">#</a> 父子组件通信</h4> <ul><li>父组件给子组件传递 props</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;g-collapse :single=&quot;true&quot;&gt;
    &lt;g-collapse-item title=&quot;标题1&quot; name=&quot;1&quot;&gt;内容1&lt;/g-collapse-item&gt;
    &lt;g-collapse-item title=&quot;标题2&quot; name=&quot;2&quot;&gt;内容2&lt;/g-collapse-item&gt;
    &lt;g-collapse-item title=&quot;标题3&quot; name=&quot;3&quot;&gt;内容3&lt;/g-collapse-item&gt;
&lt;/g-collapse&gt;
</code></pre></div><ul><li>父组件根据子组件情况修改父组件 data</li></ul> <div class="language- extra-class"><pre class="language-text"><code>mounted() {
    this.$children.forEach((vm) =&gt; {
        if (vm.$options.name === 'WheelSider') {
            this.hasSider = true
        }
    })
}
</code></pre></div><ul><li>父组件挑选符合条件的子组件,修改子组件 data</li></ul> <div class="language- extra-class"><pre class="language-text"><code>mounted() {

    // 把父组件的 gutter 传递给子组件
    this.$children.forEach((vm) =&gt; {
        vm.gutter = this.gutter
    })
}
</code></pre></div><ul><li>父组件与符合条件的子组件通信</li></ul> <div class="language- extra-class"><pre class="language-text"><code>this.$children.forEach((vm)=&gt;{
    if(vm.$options.name===&quot;WheelTabsHead&quot;){
        vm.$children.forEach((childVm)=&gt;{
            if(childVm.$options.name==&quot;WheelTabsItem&quot;&amp;&amp;childVm.name==this.selected){
                this.eventBus&amp;&amp;this.eventBus.$emit('update:selected', this.selected,childVm)
            }
        })
    }
})
</code></pre></div><blockquote><p>注意,由于父子组件挂载顺序的原因,所以在父组件的mounted中进行父子通信是最合适的</p></blockquote> <h2 id="事件"><a href="#事件" class="header-anchor">#</a> 事件</h2> <h4 id="emit"><a href="#emit" class="header-anchor">#</a> $emit</h4> <ul><li>$emit和$on必须作用在同一实例上</li></ul> <blockquote><p>父组件 A 通过 props 的方式向子组件 B 传递,B to A 通过在 B 组件中 $emit, A 组件中 v-on 的方式实现.</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>// A.vue
&lt;template&gt;
    &lt;div&gt;
        &lt;B @travel=&quot;callback&quot;&gt;&lt;/B&gt;
        ......
    &lt;/div&gt;
&lt;/template&gt;


// B.vue
&lt;template&gt;
    &lt;div @click=&quot;emit&quot;&gt;
    ......
    &lt;/div&gt;
&lt;/template&gt;

methods:{
    emit(){
        this.$emit('travel')
    }
}
</code></pre></div><ul><li>$emit是不冒泡的</li> <li>$emit 实现孙子组件向爷爷组件通信</li></ul> <blockquote><p>前提：不考虑 eventBus</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>&lt;grandPa @fatherSay=&quot;console.log('ok,grandPa konw it')&quot;&gt;
    &lt;father @childSay=&quot;this.$emit('fatherSay')&quot;&gt;
        &lt;child&gt;&lt;/child&gt;
    &lt;/father&gt;
&lt;/grandPa&gt;

</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>// child.vue
this.$emit('childSay')
</code></pre></div><h4 id="event"><a href="#event" class="header-anchor">#</a> $event</h4> <ul><li>对于原生元素（如 button、input）来说,$event 是原始的 DOM 事件</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;input type=&quot;checkbox&quot;  @change=changeStatus($event,item)&gt;

changeStatus(event,item){

}
</code></pre></div><blockquote><p>如果回调函数只有 event 一个参数,那么 $event 可以省略</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>&lt;input type=&quot;checkbox&quot;  @change=changeStatus&gt;

changeStatus(event){

}
</code></pre></div><ul><li>对于自定义组件（如 child）来说,$event 是其自身 $emit 发出的第二个参数</li></ul> <div class="language- extra-class"><pre class="language-text"><code>    &lt;div id=&quot;app&quot;&gt;
        &lt;child @click=&quot;clickChild(a,$event)&quot;&gt;&lt;/child&gt;
    &lt;/div&gt;

    Vue.component('child', {
        data: function () {
            return {}
        },
        template: '&lt;button @click=&quot;clickButton&quot;&gt;点我&lt;/button&gt;',
        methods: {
            clickButton() {
                this.$emit('click', 1,2) // $emit的第二个参数为$event
            }
        }
    })

    var example1 = new Vue({
        el: '#app',
        data: {
        },
        methods: {
            clickChild(e) {
                console.log(e); // 1,说明$event值为1
            }
        }
    })
</code></pre></div><h4 id="eventbus"><a href="#eventbus" class="header-anchor">#</a> eventBus</h4> <blockquote><p>eventBus 与 $on(),$emit() 同属于发布订阅模式,不同于后者需要依附于某个 vue 实例,eventBus 作为事件中心,独立于各个组件.因此可以利用它实现多组件间通信</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>this.eventBus&amp;&amp;this.eventBus.$emit() // 发布

this.eventBus&amp;&amp;this.eventBus.$on() // 订阅

this.eventBus.$off() // 取消订阅
</code></pre></div><h2 id="异步"><a href="#异步" class="header-anchor">#</a> 异步</h2> <p>对于</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;g-uploader :fileList.sync=&quot;fileList&quot;&gt;{{}}&lt;/g-uploader&gt;

data(){
    fileList:[]
}
</code></pre></div><p>在 uploader 组件中更新 fileList 后,是无法直接获取最新的 fileList</p> <div class="language- extra-class"><pre class="language-text"><code>props:{
    fileList:{
        type:Array
    }
}
let arr=[{name:'libai'}]
this.$emit('update:fileList',arr)
console.log(this.fileList) // []
</code></pre></div><p>这是因为父组件获取到更新后的 fileList 是同步的（即sync是同步的）,而父组件将更新后的 fileList 传回给子组件是异步的（即vue 的 render 是同步的）</p> <div class="language- extra-class"><pre class="language-text"><code>let arr=[{name:'libai'}]
this.$emit('update:fileList',arr)
setTimeout(()=&gt;{
    console.log(this.fileList); // [{name:'libai'}]
})
</code></pre></div><h2 id="依赖注入"><a href="#依赖注入" class="header-anchor">#</a> 依赖注入</h2> <div class="language- extra-class"><pre class="language-text"><code>// nav
provide() {
    return {
        root: this
    }
}
methods:{
    addItem(){...}
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>// nav-item
inject:['root'],

this.root.addItem(this) // 调用 nav 的方法
</code></pre></div><h2 id="生命周期"><a href="#生命周期" class="header-anchor">#</a> 生命周期</h2> <h4 id="created"><a href="#created" class="header-anchor">#</a> created</h4> <blockquote><p>vue实例被创建,可访问到 data/props</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>// 类似于
var div=document.createElement('div')
</code></pre></div><h4 id="mounted"><a href="#mounted" class="header-anchor">#</a> mounted</h4> <ul><li>vue实例被挂载到真实的DOM节点,如果要执行DOM操作及CSS有关操作,必须在 mounted 中</li></ul> <div class="language- extra-class"><pre class="language-text"><code>// 类似于
document.body.appendChild(div)
</code></pre></div><ul><li>只在组件被挂载到DOM元素上时执行一次,data/props的改变不会触发它</li> <li>mounted 和 updated
<ul><li>都会重新渲染组件</li> <li>第一次打开页面/手动刷新页面,会触发 mounted,点击按钮改变组件 state ,触发 updated</li> <li>mounted 总是伴随着 updated</li></ul></li></ul> <h4 id="uodated"><a href="#uodated" class="header-anchor">#</a> uodated</h4> <blockquote><p>由于数据更改导致的虚拟 DOM 重新渲染和打补丁,在这之后会调用该钩子.然而在大多数情况下,你应该避免在此期间更改状态.如果要相应状态改变,通常最好使用计算属性或 watcher 取而代之.</p></blockquote> <h4 id="beforedestroy"><a href="#beforedestroy" class="header-anchor">#</a> beforeDestroy</h4> <blockquote><p>在 beforeDestroy 中销毁注册的事件,创建的元素（防止内存泄漏）</p></blockquote> <h2 id="v-for"><a href="#v-for" class="header-anchor">#</a> v-for</h2> <blockquote><p>v-for 一定要搭配 key=id</p></blockquote> <blockquote><p>可以认为在不加 key 的情况下 vue 是按照索引来判断要删除哪些元素的.
原先的索引</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>0 1 2
</code></pre></div><p>删除第一项,重新生成索引后</p> <div class="language- extra-class"><pre class="language-text"><code>0 1
</code></pre></div><p>vue发现少了最后一项,于是把最后一项删除了,导致了bug</p> <ul><li>一般用 item.id 作为 key（不能:key=index,原因见上）</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;li v-for=&quot;(item,index) in items&quot; :key=item.id&gt;
    &lt;child&gt;
    &lt;/child&gt;
    &lt;button @click=&quot;remove(index)&quot;&gt;删除&lt;/button&gt;
&lt;/li&gt;
</code></pre></div><ul><li>如果是 template 的话,key 要加在实际的DOM元素上</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;template v-for=&quot;item,index in dataSource&quot;&gt;
    &lt;tr :key=&quot;item.id&quot;&gt;
    &lt;/tr&gt;
&lt;/template&gt;
</code></pre></div><h2 id="插件"><a href="#插件" class="header-anchor">#</a> 插件</h2> <ul><li>toastPlugin</li></ul> <blockquote><p>用于生成和销毁 toast</p></blockquote> <ul><li>validatorPlugin</li></ul> <blockquote><p>用于表单验证</p></blockquote> <h2 id="指令"><a href="#指令" class="header-anchor">#</a> 指令</h2> <blockquote><p>用于封装DOM操作</p></blockquote> <ul><li>clickOutside</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;div　ref=&quot;cascader&quot; @clickOutside=&quot;close&quot;&gt;&lt;/div&gt;
</code></pre></div><blockquote><p>点击除 cascader 外的其它位置,则关闭 popover,并自动移除对其它位置的监听</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/fish-wheels/vue-cli/" class="prev">
        vue-cli
      </a></span> <span class="next"><a href="/fish-wheels/%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/">
        开发流程
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/fish-wheels/assets/js/app.9a142dd2.js" defer></script><script src="/fish-wheels/assets/js/2.2ea81ea5.js" defer></script><script src="/fish-wheels/assets/js/31.b9f98c9c.js" defer></script>
  </body>
</html>
