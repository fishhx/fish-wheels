<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>开发流程 | FishWheels</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/fish-wheels/fish.png">
    <meta name="description" content="一个好用的UI框架">
    <link rel="preload" href="/fish-wheels/assets/css/0.styles.a1388bfb.css" as="style"><link rel="preload" href="/fish-wheels/assets/js/app.9a142dd2.js" as="script"><link rel="preload" href="/fish-wheels/assets/js/2.2ea81ea5.js" as="script"><link rel="preload" href="/fish-wheels/assets/js/33.e74bffd9.js" as="script"><link rel="prefetch" href="/fish-wheels/assets/js/10.387cf6d0.js"><link rel="prefetch" href="/fish-wheels/assets/js/11.2b794fd9.js"><link rel="prefetch" href="/fish-wheels/assets/js/12.92c5bd01.js"><link rel="prefetch" href="/fish-wheels/assets/js/13.07eae319.js"><link rel="prefetch" href="/fish-wheels/assets/js/14.548229e0.js"><link rel="prefetch" href="/fish-wheels/assets/js/15.b3972e82.js"><link rel="prefetch" href="/fish-wheels/assets/js/16.6abe024a.js"><link rel="prefetch" href="/fish-wheels/assets/js/17.7647b667.js"><link rel="prefetch" href="/fish-wheels/assets/js/18.8beae564.js"><link rel="prefetch" href="/fish-wheels/assets/js/19.ffaf751e.js"><link rel="prefetch" href="/fish-wheels/assets/js/20.71e9755a.js"><link rel="prefetch" href="/fish-wheels/assets/js/21.2eeefa86.js"><link rel="prefetch" href="/fish-wheels/assets/js/22.ba13e6c6.js"><link rel="prefetch" href="/fish-wheels/assets/js/23.ef42b6cd.js"><link rel="prefetch" href="/fish-wheels/assets/js/24.e095945c.js"><link rel="prefetch" href="/fish-wheels/assets/js/25.c3360e8d.js"><link rel="prefetch" href="/fish-wheels/assets/js/26.b1ee3bc4.js"><link rel="prefetch" href="/fish-wheels/assets/js/27.80cdf865.js"><link rel="prefetch" href="/fish-wheels/assets/js/28.a04ca27b.js"><link rel="prefetch" href="/fish-wheels/assets/js/29.9872dfbe.js"><link rel="prefetch" href="/fish-wheels/assets/js/3.831c4e7b.js"><link rel="prefetch" href="/fish-wheels/assets/js/30.a190a64f.js"><link rel="prefetch" href="/fish-wheels/assets/js/31.b9f98c9c.js"><link rel="prefetch" href="/fish-wheels/assets/js/32.7b09e0c4.js"><link rel="prefetch" href="/fish-wheels/assets/js/34.79386e81.js"><link rel="prefetch" href="/fish-wheels/assets/js/35.e4b40eba.js"><link rel="prefetch" href="/fish-wheels/assets/js/4.4f9327b8.js"><link rel="prefetch" href="/fish-wheels/assets/js/5.265644b2.js"><link rel="prefetch" href="/fish-wheels/assets/js/6.42b0cd5e.js"><link rel="prefetch" href="/fish-wheels/assets/js/7.82354ee2.js"><link rel="prefetch" href="/fish-wheels/assets/js/8.ca28e18e.js"><link rel="prefetch" href="/fish-wheels/assets/js/9.6488c8f7.js">
    <link rel="stylesheet" href="/fish-wheels/assets/css/0.styles.a1388bfb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fish-wheels/" class="home-link router-link-active"><img src="/fish-wheels/fish.png" alt="FishWheels" class="logo"> <span class="site-name can-hide">FishWheels</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/fish-wheels/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/fish-wheels/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>入门</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fish-wheels/introduce/" class="sidebar-link">介绍</a></li><li><a href="/fish-wheels/install/" class="sidebar-link">安装</a></li><li><a href="/fish-wheels/get-started/" class="sidebar-link">快速上手</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>组件</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fish-wheels/components/button.html" class="sidebar-link">Button</a></li><li><a href="/fish-wheels/components/icon.html" class="sidebar-link">Icon</a></li><li><a href="/fish-wheels/components/input.html" class="sidebar-link">Input</a></li><li><a href="/fish-wheels/components/grid.html" class="sidebar-link">Grid</a></li><li><a href="/fish-wheels/components/tabs.html" class="sidebar-link">Tabs</a></li><li><a href="/fish-wheels/components/pager.html" class="sidebar-link">Pager</a></li><li><a href="/fish-wheels/components/popover.html" class="sidebar-link">Popover</a></li><li><a href="/fish-wheels/components/slides.html" class="sidebar-link">Carousel</a></li><li><a href="/fish-wheels/components/collapse.html" class="sidebar-link">Collapse</a></li><li><a href="/fish-wheels/components/cascader.html" class="sidebar-link">Cascader</a></li><li><a href="/fish-wheels/components/calendar.html" class="sidebar-link">Calendar</a></li><li><a href="/fish-wheels/components/tree.html" class="sidebar-link">Tree</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>总结</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fish-wheels/%E7%BB%84%E4%BB%B6%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90/" class="sidebar-link">组件需求分析</a></li><li><a href="/fish-wheels/API%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/" class="sidebar-link">API设计原则</a></li><li><a href="/fish-wheels/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E6%80%BB%E7%BB%93/" class="sidebar-link">单元测试总结</a></li><li><a href="/fish-wheels/vue-cli/" class="sidebar-link">vue-cli</a></li><li><a href="/fish-wheels/vue-summary/" class="sidebar-link">VueSummary</a></li><li><a href="/fish-wheels/%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/" aria-current="page" class="active sidebar-link">开发流程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fish-wheels/%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/#持续集成" class="sidebar-link">持续集成</a></li><li class="sidebar-sub-header"><a href="/fish-wheels/%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/#测试" class="sidebar-link">测试</a></li><li class="sidebar-sub-header"><a href="/fish-wheels/%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/#在-github-上部署预览网站" class="sidebar-link">在 Github 上部署预览网站</a></li><li class="sidebar-sub-header"><a href="/fish-wheels/%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/#导出组件" class="sidebar-link">导出组件</a></li><li class="sidebar-sub-header"><a href="/fish-wheels/%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/#发布-npm-包" class="sidebar-link">发布 npm 包</a></li></ul></li><li><a href="/fish-wheels/%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/" class="sidebar-link">开发规范</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="开发流程"><a href="#开发流程" class="header-anchor">#</a> 开发流程</h1> <h2 id="持续集成"><a href="#持续集成" class="header-anchor">#</a> 持续集成</h2> <blockquote><p>使用工具：travis CI</p></blockquote> <h4 id="持续集成是什么"><a href="#持续集成是什么" class="header-anchor">#</a> 持续集成是什么</h4> <ul><li>持续集成指的是只要代码有变更,就自动运行构建,测试,部署。</li> <li>持续集成的好处在于,每次代码的小幅变更,就能看到运行结果,从而不断累积小的变更,而不是在开发周期结束时,一下子合并一大块代码。</li> <li>本项目采用 travis CI 进行持续集成</li></ul> <h4 id="travis-ci-踩坑"><a href="#travis-ci-踩坑" class="header-anchor">#</a> travis CI 踩坑</h4> <ul><li>test</li></ul> <blockquote><p>本项目测试框架需要搭配 Karma 使用。在 karma.conf.js 中添加测试覆盖率相关内容后,始终无法通过 pass。检查 log 发现,test 没有自动 exit。于是将 scripts 中的 watch 参数设置为 false,无果。翻阅 Karma 文档,知道了有 命令参数 -- single-run。尝试添加后,成功。</p></blockquote> <ul><li>deploy</li></ul> <blockquote><p>使用 travis CI 进行 deploy 需要对 github_token 进行处理,详情可以参考<a href="https://docs.travis-ci.com/user/deployment/pages/#setting-the-github-token" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。主要是两个步骤,一是生成 github_token,用于授权给 CI 平台；二是在 travis CI 中进行环境变量设置,以保证 .travis.yml 能读取到 token。</p></blockquote> <h2 id="测试"><a href="#测试" class="header-anchor">#</a> 测试</h2> <blockquote><p>使用工具：Karma,mocha,chai,sinon（回调测试）</p></blockquote> <h4 id="karma"><a href="#karma" class="header-anchor">#</a> Karma</h4> <ul><li>karma 不是测试框架,它的作用是提供测试所需环境（比如打开浏览器）官网描述如下。</li></ul> <blockquote><p>Karma is not a testing framework, nor an assertion library. Karma just launches an HTTP server, and generates the test runner HTML file you probably already know from your favourite testing framework. So for testing purposes you can use pretty much anything you like.</p></blockquote> <ul><li>我们可以配置 karma.conf.js 以指定：</li></ul> <blockquote><ul><li>测试框架</li> <li>测试文件位置/格式</li> <li>测试覆盖率相关内容</li> <li>测试模式（single-run/watch）等等</li></ul></blockquote> <h4 id="mocha"><a href="#mocha" class="header-anchor">#</a> mocha</h4> <p>mocha 是一个测试框架,类似的还有 Jasmine,QUnit,Jest 等等</p> <h4 id="chai"><a href="#chai" class="header-anchor">#</a> chai</h4> <p>断言库,提供 expect,should 等语句</p> <h2 id="在-github-上部署预览网站"><a href="#在-github-上部署预览网站" class="header-anchor">#</a> 在 Github 上部署预览网站</h2> <blockquote><p>使用工具：vuepress</p></blockquote> <h4 id="步骤"><a href="#步骤" class="header-anchor">#</a> 步骤</h4> <ul><li>安装 vuepress</li> <li>在根目录下创建 deploy.sh,内容参考 vuepress 文档</li> <li>生成预览页面</li></ul> <div class="language- extra-class"><pre class="language-text"><code>vuepress dev docs  
</code></pre></div><ul><li>打包,生成静态文件</li></ul> <div class="language- extra-class"><pre class="language-text"><code>vuepress build docs
</code></pre></div><ul><li>之后更新项目后想要重新部署,只需执行以下命令（已在 script 中完成配置）</li></ul> <div class="language- extra-class"><pre class="language-text"><code>yarn run docs:build
yarn run deplosh
</code></pre></div><h2 id="导出组件"><a href="#导出组件" class="header-anchor">#</a> 导出组件</h2> <blockquote><p>使用工具：vue-cli 的 lib 模式</p></blockquote> <h4 id="流程"><a href="#流程" class="header-anchor">#</a> 流程</h4> <ul><li>新建 src/index.js,导出所有组件</li></ul> <div class="language- extra-class"><pre class="language-text"><code>export {default as GSubNav} from './components/nav/sub-nav'
export {default as GNav} from './components/nav/nav'
...
</code></pre></div><ul><li>build</li></ul> <div class="language- extra-class"><pre class="language-text"><code>vue-cli-service build --target lib --name fish-wheels src/index.js
</code></pre></div><ul><li>此时 dist 目录中存放的就是打包后的文件,包括 umd.js（用于兼容各类模块引用方式）,以及相关 css。注意 vue 不会被打包。</li></ul> <h2 id="发布-npm-包"><a href="#发布-npm-包" class="header-anchor">#</a> 发布 npm 包</h2> <h4 id="流程-2"><a href="#流程-2" class="header-anchor">#</a> 流程</h4> <ul><li>更新 package.json 的 version</li> <li>去掉 package.json 里的 &quot;private&quot;:&quot;true&quot;</li> <li>设置 package.json 的 main 值为&quot;dist/FishWheels.umd.js&quot;（作为使用库时的默认入口文件）</li> <li>去 https://www.npmjs.com/ 注册一个账户</li> <li>确认一下邮箱（必须）</li> <li>如果时第一次发布,请在项目根目录运行 npm adduser</li> <li>如果错误提示里面含有 https://registry.npm.taobao.org 则说明你的 npm 源目前为淘宝源,需要更换为 npm 官方源（https://registry.npmjs.org/）</li> <li>运行 npm publish
<ul><li>报错：You do not have permission to publish &quot;package-demo&quot;.说明包重名了,在 package.json 修改 name</li> <li>报错：You must be logged in to publish packages.</li></ul></li> <li>如果之前已经发布过版本,重复以下三件事即可
<ul><li>改版本号</li> <li>yarn build（即使用 vue-cli 的 lib 模式进行打包）</li> <li>npm publish（注意 npm 源）</li></ul></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/fish-wheels/assets/js/app.9a142dd2.js" defer></script><script src="/fish-wheels/assets/js/2.2ea81ea5.js" defer></script><script src="/fish-wheels/assets/js/33.e74bffd9.js" defer></script>
  </body>
</html>
